// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int    @id @default(autoincrement())
  name    String @unique
  password String
  habit Habit[]
  session Session[]
  userGroup UserGroup[]
  allow Allow[]

  @@map("user")
}
model Habit {
  id       Int    @id @default(autoincrement())
  title    String 
  day      Int
  begin    String
  end      String
  size     Int
  floor Int
  user     User   @relation(fields:[userId],references:[id])
  userId   Int
  color    String @default("blue")

  @@map("habit")
}
model Session {
  id       Int    @id @default(autoincrement())
  token    String @unique
  user     User   @relation(fields:[userId],references:[id])
  userId   Int

  @@map("session")
}
model Group{
  id       Int    @id @default(autoincrement())
  name    String @unique
  userGroup UserGroup[]
  alow  Allow[]

  @@map("group")
}
model UserGroup {
  id       Int    @id @default(autoincrement())
  user     User   @relation(fields:[userId],references:[id])
  userId   Int
  group     Group   @relation(fields:[groupId],references:[id])
  groupId   Int
  acepted Boolean @default(false)
  color String @default("white")
  @@map("userGroup")
}
model Allow {
  id       Int    @id @default(autoincrement())
  user     User   @relation(fields:[userId],references:[id])
  userId   Int
  group     Group   @relation(fields:[groupId],references:[id])
  groupId   Int
  color String
  tag String
  @@unique([userId,groupId,color])
  @@map("allow")
}